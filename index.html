<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manixh OS</title>
    <style>
        /* --- 1. DESKTOP & WALLPAPER --- */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevent scrolling on desktop */
            height: 100vh;
            width: 100vw;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            
            /* BG image */
            background: url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover;
            user-select: none; /* Stop user from highlighting desktop text */
        }

        /* --- 2. DESKTOP ICONS --- */
        .icon-container {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .desktop-icon {
            width: 80px;
            text-align: center;
            cursor: pointer;
            color: white;
            text-shadow: 1px 1px 2px black;
            padding: 10px;
            border-radius: 5px;
            transition: 0.2s;
        }

        .desktop-icon:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .desktop-icon img {
            width: 48px;
            height: 48px;
            margin-bottom: 5px;
        }

        /* --- 3. THE WINDOW (Your Shell Container) --- */
        #draggable-window {
            position: absolute;
            top: 10vh;
            left: 20vw;
            width: min(650px, 80vw);
            height: min(450px, calc(100vh - 160px));
            max-height: calc(100vh - 160px);
            background-color: rgba(26, 27, 38, 0.3);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(65, 72, 104, 0.5);
            /* Hidden by default until clicked? Or visible. Let's default visible. */
            z-index: 100;
        }

        /* Window Title Bar (The handle for dragging) */
        #title-bar {
            height: 35px;
            background-color: rgba(36, 40, 59, 0.3);
            border-bottom: 1px solid rgba(65, 72, 104, 0.5);
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            cursor: move; /* Shows the 'move' cursor */
        }

        .window-title {
            color: #c0caf5;
            font-size: 14px;
            font-weight: bold;
        }

        .window-controls {
            display: flex;
            gap: 8px;
        }

        .control-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
        }
        .close-btn { background-color: #ff5f56; }
        .min-btn { background-color: #ffbd2e; }
        .max-btn { background-color: #27c93f; }

        /* Window Content (Where your terminal lives) */
        #window-content {
            flex-grow: 1;
            padding: 10px;
            overflow-y: auto; /* Scrollable inside the window */
            font-family: 'Courier New', Courier, monospace;
            color: #7aa2f7;
            font-size: 16px;
        }

        /* --- 4. TERMINAL INTERNALS (Your existing CSS) --- */
        .output { white-space: pre-wrap; margin-bottom: 5px; }
        .input-line { display: flex; }
        .prompt { color: #9ece6a; margin-right: 10px; }
        input {
            background: transparent;
            border: none;
            color: #c0caf5;
            font-family: inherit;
            font-size: inherit;
            flex-grow: 1;
            outline: none;
        }
        
        /* Scrollbar styling for the window */
        #window-content::-webkit-scrollbar { width: 10px; }
        #window-content::-webkit-scrollbar-track { background: #1a1b26; }
        #window-content::-webkit-scrollbar-thumb { background: #414868; border-radius: 5px; }

        /* --- 5. MODERN GLASSY TASKBAR --- */
        #taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            padding: 0 15px;
            box-shadow: 0 -2px 20px rgba(0, 255, 136, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.15);
            z-index: 1000;
        }

        #start-button {
            height: 44px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: rgba(192, 202, 245, 0.9);
            font-weight: 600;
            padding: 0 24px;
            display: flex;
            align-items: center;
            gap: 0;
            cursor: pointer;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.2);
            margin-right: 15px;
            font-family: 'Segoe UI', sans-serif;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
            letter-spacing: 0.5px;
        }

        #start-button:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0, 255, 136, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        #start-button:active {
            transform: translateY(0);
        }

        .taskbar-apps {
            display: flex;
            gap: 8px;
            flex-grow: 1;
        }

        .taskbar-button {
            height: 44px;
            min-width: 160px;
            max-width: 220px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 12px;
            color: rgba(192, 202, 245, 0.85);
            padding: 0 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.15);
            font-size: 14px;
            font-weight: 600;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            overflow: hidden;
            white-space: nowrap;
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
        }

        .taskbar-button:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .taskbar-button.active {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            box-shadow: 0 4px 20px rgba(0, 255, 136, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.2);
            color: rgba(0, 255, 136, 0.95);
        }

        #taskbar-clock {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-left: auto;
            margin-right: 42px;
            line-height: 1.2;
        }

        #taskbar-clock .clock-time {
            font-size: 16px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.95);
            letter-spacing: 0.3px;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        #taskbar-clock .clock-date {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.65);
            font-weight: 400;
            letter-spacing: 0.2px;
            text-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
        }

        /* --- SNAKE GAME WINDOW --- */
        #snake-window {
            position: absolute;
            top: 10vh;
            left: 30vw;
            width: min(460px, 70vw);
            max-height: calc(100vh - 160px);
            background-color: rgba(26, 27, 38, 0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: none;
            flex-direction: column;
            border: 1px solid rgba(65, 72, 104, 0.5);
            z-index: 100;
            overflow: hidden;
        }

        #snake-title-bar {
            height: 35px;
            background-color: rgba(36, 40, 59, 0.3);
            border-bottom: 1px solid rgba(65, 72, 104, 0.5);
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            cursor: move;
        }

        #snake-content {
            padding: 15px;
            text-align: center;
        }

        .snake-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 12px;
            gap: 15px;
        }

        .snake-stat {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid rgba(0, 255, 136, 0.3);
        }

        .snake-stat-label {
            color: #888;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            font-weight: 500;
        }

        .snake-stat-value {
            color: #00ff88;
            font-size: 24px;
            font-weight: 700;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            text-shadow: 0 0 10px #00ff88;
            letter-spacing: 0.5px;
        }

        #snakeCanvas {
            border: 3px solid #00ff88;
            border-radius: 8px;
            background: transparent;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
            display: block;
            margin: 0 auto;
        }

        .snake-controls {
            margin-top: 15px;
            color: #888;
            font-size: 12px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            font-weight: 500;
        }

        .snake-controls span {
            color: #00ff88;
            font-weight: 700;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
        }

        #snakeGameOver {
            position: absolute;
            top: 35px;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            border-radius: 0 0 8px 8px;
            z-index: 5;
        }

        .snake-gameover-content {
            text-align: center;
            padding: 30px;
        }

        .snake-gameover-content h2 {
            color: #ff3535;
            font-size: 36px;
            text-shadow: 0 0 20px #f64d4d;
            margin-bottom: 15px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .snake-final-stat {
            color: #77dd99;
            font-size: 18px;
            margin: 8px 0;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            font-weight: 600;
        }

        #snakeRestartBtn {
            background: linear-gradient(135deg, #00ff88, #00cc6f);
            border: none;
            color: #000;
            font-size: 16px;
            font-weight: 700;
            padding: 10px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            text-transform: uppercase;
            margin-top: 15px;
            letter-spacing: 0.5px;
        }

        #snakeRestartBtn:hover {
            background: linear-gradient(135deg, #00cc6f, #00ff88);
        }

        #snakePlayBtn {
            background: linear-gradient(135deg, #00ff88, #00cc6f);
            border: none;
            color: #000;
            font-size: 24px;
            font-weight: 700;
            padding: 15px 40px;
            border-radius: 8px;
            cursor: pointer;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            text-transform: uppercase;
            margin-top: 20px;
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.4);
            transition: all 0.3s;
            letter-spacing: 1px;
        }

        #snakePlayBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 255, 136, 0.6);
        }

        #snakePlayBtn:active {
            transform: translateY(0);
        }

        #snakeStartScreen {
            position: absolute;
            top: 35px;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 0 0 8px 8px;
            z-index: 5;
        }

        .snake-start-content {
            text-align: center;
            padding: 30px;
        }

        .snake-start-content h2 {
            color: #00ff88;
            font-size: 48px;
            text-shadow: 0 0 20px #00ff88;
            margin-bottom: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            font-weight: 800;
            letter-spacing: 2px;
        }

        .snake-start-content p {
            color: #888;
            font-size: 16px;
            margin-bottom: 10px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
            font-weight: 500;
        }

        .snake-start-content p span {
            color: #00ff88;
            font-weight: 700;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', sans-serif;
        }

        /* --- RESUME PDF VIEWER WINDOW --- */
        #resume-window {
            position: absolute;
            top: 8vh;
            left: 25vw;
            width: min(800px, 85vw);
            height: min(600px, calc(100vh - 140px));
            max-height: calc(100vh - 140px);
            background-color: rgba(26, 27, 38, 0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: none;
            flex-direction: column;
            border: 1px solid rgba(65, 72, 104, 0.5);
            z-index: 100;
            overflow: hidden;
        }

        #resume-title-bar {
            height: 35px;
            background-color: rgba(36, 40, 59, 0.3);
            border-bottom: 1px solid rgba(65, 72, 104, 0.5);
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            cursor: move;
        }

        #resume-content {
            flex-grow: 1;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
        }

        #resume-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>

<div class="icon-container">
    <div class="desktop-icon" onclick="openTerminal()">
        <div style="font-size: 40px;">üíª</div>
        <div>Terminal</div>
    </div>
    <div class="desktop-icon" onclick="openSnakeGame()">
        <div style="font-size: 40px;">üêç</div>
        <div>Snake Game</div>
    </div>
    <div class="desktop-icon" onclick="openResume()">
        <div style="font-size: 40px;">üìÑ</div>
        <div>Resume</div>
    </div>
</div>

<div id="draggable-window">
    <div id="title-bar">
        <div class="window-title">guest@manixh:~</div>
        <div class="window-controls">
            <div class="control-btn min-btn"></div>
            <div class="control-btn max-btn" onclick="minimizeTerminal()"></div>
            <div class="control-btn close-btn" onclick="closeTerminal()"></div>
        </div>
    </div>

    <div id="window-content" onclick="document.getElementById('cmdInput').focus()">
        <div id="history">
            <div class="output">Welcome to Manixh OS (v2.0).</div>
            <div class="output">Click the icons on the desktop or type 'help' here.</div>
            <br>
        </div>
        <div class="input-line">
            <span class="prompt">guest@manixh:~$</span>
            <input type="text" id="cmdInput" autocomplete="off" autofocus>
        </div>
    </div>
</div>

<div id="snake-window">
    <div id="snake-title-bar">
        <div class="window-title">üêç Snake Game</div>
        <div class="window-controls">
            <div class="control-btn min-btn"></div>
            <div class="control-btn max-btn" onclick="minimizeSnake()"></div>
            <div class="control-btn close-btn" onclick="closeSnake()"></div>
        </div>
    </div>

    <div id="snake-content">
        <div class="snake-stats">
            <div class="snake-stat">
                <div class="snake-stat-label">Score</div>
                <div class="snake-stat-value" id="snakeScore">0</div>
            </div>
            <div class="snake-stat">
                <div class="snake-stat-label">High Score</div>
                <div class="snake-stat-value" id="snakeHighScore">0</div>
            </div>
            <div class="snake-stat">
                <div class="snake-stat-label">Time</div>
                <div class="snake-stat-value" id="snakeTime">0:00</div>
            </div>
        </div>

        <canvas id="snakeCanvas" width="380" height="380"></canvas>

        <div class="snake-controls">
            <span>WASD</span> or <span>Arrow Keys</span>
        </div>

        <div id="snakeStartScreen">
            <div class="snake-start-content">
                <h2>üêç SNAKE</h2>
                <p>Use <span>WASD</span> or <span>Arrow Keys</span> to control</p>
                <p>Collect food and avoid walls & your tail</p>
                <p>Speed increases as you score!</p>
                <button id="snakePlayBtn">Play Game</button>
            </div>
        </div>

        <div id="snakeGameOver">
            <div class="snake-gameover-content">
                <h2>GAME OVER</h2>
                <div class="snake-final-stat">Score: <span id="snakeFinalScore">0</span></div>
                <div class="snake-final-stat">High Score: <span id="snakeFinalHighScore">0</span></div>
                <div class="snake-final-stat">Time: <span id="snakeFinalTime">0:00</span></div>
                <button id="snakeRestartBtn">Play Again</button>
            </div>
        </div>
    </div>
</div>

<div id="resume-window">
    <div id="resume-title-bar">
        <div class="window-title">üìÑ Resume</div>
        <div class="window-controls">
            <div class="control-btn min-btn"></div>
            <div class="control-btn max-btn" onclick="minimizeResume()"></div>
            <div class="control-btn close-btn" onclick="closeResume()"></div>
        </div>
    </div>
    <div id="resume-content">
        <iframe id="resume-iframe" src="resume.pdf"></iframe>
    </div>
</div>

<div id="taskbar">
    <div id="start-button">
        <span>Start</span>
    </div>
    <div class="taskbar-apps" id="taskbar-apps">
        <!-- Taskbar buttons will appear here -->
    </div>
    <div id="taskbar-clock">
        <div class="clock-time">12:00 PM</div>
        <div class="clock-date">Mon, Jan 30</div>
    </div>
</div>

<script>
    // --- WINDOW MANAGEMENT LOGIC ---

    const windowEl = document.getElementById("draggable-window");
    const titleBar = document.getElementById("title-bar");
    const cmdInput = document.getElementById("cmdInput");
    const taskbarApps = document.getElementById("taskbar-apps");
    let terminalTaskbarButton = null;
    let currentZIndex = 100;

    // Bring terminal window to front when clicked
    windowEl.addEventListener('mousedown', () => {
        bringToFront(windowEl);
    });

    function bringToFront(window) {
        currentZIndex++;
        window.style.zIndex = currentZIndex;
    }

    function closeTerminal() {
        windowEl.style.display = "none";
        removeTaskbarButton();
    }

    function openTerminal() {
        windowEl.style.display = "flex";
        cmdInput.focus();
        addTaskbarButton();
    }

    function minimizeTerminal() {
        windowEl.style.display = "none";
        if (terminalTaskbarButton) {
            terminalTaskbarButton.classList.remove('active');
        }
    }

    function toggleTerminal() {
        if (windowEl.style.display === "none") {
            windowEl.style.display = "flex";
            cmdInput.focus();
            if (terminalTaskbarButton) {
                terminalTaskbarButton.classList.add('active');
            }
        } else {
            minimizeTerminal();
        }
    }

    function addTaskbarButton() {
        if (!terminalTaskbarButton) {
            terminalTaskbarButton = document.createElement('div');
            terminalTaskbarButton.className = 'taskbar-button active';
            terminalTaskbarButton.innerHTML = '<span>üíª</span><span>Terminal</span>';
            terminalTaskbarButton.onclick = toggleTerminal;
            taskbarApps.appendChild(terminalTaskbarButton);
        }
        terminalTaskbarButton.classList.add('active');
    }

    function removeTaskbarButton() {
        if (terminalTaskbarButton) {
            terminalTaskbarButton.remove();
            terminalTaskbarButton = null;
        }
    }

    // Update clock
    function updateClock() {
        const now = new Date();
        const hours = now.getHours() % 12 || 12;
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const ampm = now.getHours() >= 12 ? 'PM' : 'AM';
        
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        const dayName = days[now.getDay()];
        const monthName = months[now.getMonth()];
        const date = now.getDate();
        
        document.querySelector('#taskbar-clock .clock-time').textContent = `${hours}:${minutes} ${ampm}`;
        document.querySelector('#taskbar-clock .clock-date').textContent = `${dayName}, ${monthName} ${date}`;
    }
    updateClock();
    setInterval(updateClock, 1000);

    // Start with terminal open and in taskbar
    addTaskbarButton();

    // --- SNAKE GAME WINDOW MANAGEMENT ---
    const snakeWindow = document.getElementById("snake-window");
    const snakeTitleBar = document.getElementById("snake-title-bar");
    let snakeTaskbarButton = null;
    let snakeGameActive = false;

    // Bring snake window to front when clicked
    snakeWindow.addEventListener('mousedown', () => {
        bringToFront(snakeWindow);
    });

    function openSnakeGame() {
        snakeWindow.style.display = "flex";
        resizeSnakeCanvas();
        if (!snakeGameActive) {
            document.getElementById('snakeStartScreen').style.display = 'flex';
            snakeGameActive = true;
        }
        addSnakeTaskbarButton();
    }

    function resizeSnakeCanvas() {
        const maxSize = Math.min(
            window.innerWidth * 0.5,
            window.innerHeight - 300,
            380
        );
        const canvasSize = Math.floor(maxSize / 20) * 20;
        snakeCanvas.width = canvasSize;
        snakeCanvas.height = canvasSize;
    }

    function closeSnake() {
        snakeWindow.style.display = "none";
        removeSnakeTaskbarButton();
        stopSnakeGame();
        document.getElementById('snakeStartScreen').style.display = 'none';
        snakeGameActive = false;
    }

    function minimizeSnake() {
        snakeWindow.style.display = "none";
        if (snakeTaskbarButton) {
            snakeTaskbarButton.classList.remove('active');
        }
    }

    function toggleSnake() {
        if (snakeWindow.style.display === "none") {
            snakeWindow.style.display = "flex";
            if (snakeTaskbarButton) {
                snakeTaskbarButton.classList.add('active');
            }
        } else {
            minimizeSnake();
        }
    }

    function addSnakeTaskbarButton() {
        if (!snakeTaskbarButton) {
            snakeTaskbarButton = document.createElement('div');
            snakeTaskbarButton.className = 'taskbar-button active';
            snakeTaskbarButton.innerHTML = '<span>üêç</span><span>Snake Game</span>';
            snakeTaskbarButton.onclick = toggleSnake;
            taskbarApps.appendChild(snakeTaskbarButton);
        }
        snakeTaskbarButton.classList.add('active');
    }

    function removeSnakeTaskbarButton() {
        if (snakeTaskbarButton) {
            snakeTaskbarButton.remove();
            snakeTaskbarButton = null;
        }
    }

    // --- RESUME PDF VIEWER WINDOW MANAGEMENT ---
    const resumeWindow = document.getElementById("resume-window");
    const resumeTitleBar = document.getElementById("resume-title-bar");
    let resumeTaskbarButton = null;

    // Bring resume window to front when clicked
    resumeWindow.addEventListener('mousedown', () => {
        bringToFront(resumeWindow);
    });

    function openResume() {
        resumeWindow.style.display = "flex";
        addResumeTaskbarButton();
        bringToFront(resumeWindow);
    }

    function closeResume() {
        resumeWindow.style.display = "none";
        removeResumeTaskbarButton();
    }

    function minimizeResume() {
        resumeWindow.style.display = "none";
        if (resumeTaskbarButton) {
            resumeTaskbarButton.classList.remove('active');
        }
    }

    function toggleResume() {
        if (resumeWindow.style.display === "none") {
            resumeWindow.style.display = "flex";
            if (resumeTaskbarButton) {
                resumeTaskbarButton.classList.add('active');
            }
            bringToFront(resumeWindow);
        } else {
            minimizeResume();
        }
    }

    function addResumeTaskbarButton() {
        if (!resumeTaskbarButton) {
            resumeTaskbarButton = document.createElement('div');
            resumeTaskbarButton.className = 'taskbar-button active';
            resumeTaskbarButton.innerHTML = '<span>üìÑ</span><span>Resume</span>';
            resumeTaskbarButton.onclick = toggleResume;
            taskbarApps.appendChild(resumeTaskbarButton);
        }
        resumeTaskbarButton.classList.add('active');
    }

    function removeResumeTaskbarButton() {
        if (resumeTaskbarButton) {
            resumeTaskbarButton.remove();
            resumeTaskbarButton = null;
        }
    }

    // Resume window drag functionality
    let isResumeDragging = false;
    let resumeOffsetX, resumeOffsetY;

    resumeTitleBar.addEventListener("mousedown", (e) => {
        isResumeDragging = true;
        resumeOffsetX = e.clientX - resumeWindow.getBoundingClientRect().left;
        resumeOffsetY = e.clientY - resumeWindow.getBoundingClientRect().top;
    });

    document.addEventListener("mousemove", (e) => {
        if (isResumeDragging) {
            resumeWindow.style.left = `${e.clientX - resumeOffsetX}px`;
            resumeWindow.style.top = `${e.clientY - resumeOffsetY}px`;
        }
    });

    document.addEventListener("mouseup", () => {
        isResumeDragging = false;
    });

    // DRAG FUNCTIONALITY (The "OS" Feel)
    let isDragging = false;
    let offsetX, offsetY;

    titleBar.addEventListener("mousedown", (e) => {
        isDragging = true;
        // Calculate where the mouse struck the title bar relative to the window corner
        offsetX = e.clientX - windowEl.getBoundingClientRect().left;
        offsetY = e.clientY - windowEl.getBoundingClientRect().top;
    });

    document.addEventListener("mousemove", (e) => {
        if (isDragging) {
            windowEl.style.left = `${e.clientX - offsetX}px`;
            windowEl.style.top = `${e.clientY - offsetY}px`;
        }
    });

    document.addEventListener("mouseup", () => {
        isDragging = false;
    });

    // Snake window drag functionality
    let isSnakeDragging = false;
    let snakeOffsetX, snakeOffsetY;

    snakeTitleBar.addEventListener("mousedown", (e) => {
        isSnakeDragging = true;
        snakeOffsetX = e.clientX - snakeWindow.getBoundingClientRect().left;
        snakeOffsetY = e.clientY - snakeWindow.getBoundingClientRect().top;
    });

    document.addEventListener("mousemove", (e) => {
        if (isSnakeDragging) {
            snakeWindow.style.left = `${e.clientX - snakeOffsetX}px`;
            snakeWindow.style.top = `${e.clientY - snakeOffsetY}px`;
        }
    });

    document.addEventListener("mouseup", () => {
        isSnakeDragging = false;
    });

    // --- TERMINAL LOGIC (Your Existing Code) ---

    const history = document.getElementById('history');
    
    // Command Registry
    const commands = {
        help: () => `Available commands:
  about     - Who am I?
  resume    - View my resume
  linkedin  - Visit my LinkedIn
  github    - Visit my GitHub
  advice    - Get random life advice
  clear     - Clear the terminal
  date      - Show current time
  GuessNumber - Play a number guessing game
  exit      - Close the terminal window`,
        
        about: () => `I am a Computer Engineering student at UTA.
Interests: Hardware, Robotics, C/C++, Embedded Systems.`,
        
        resume: () => {
            window.open('resume.pdf', '_blank'); 
            return "Opening resume...";
        },
        
        linkedin: () => {
            window.open('https://www.linkedin.com/in/manish-shrestha-aa9075308/', '_blank');
            return "Opening LinkedIn...";
        },
        
        github: () => {
            window.open('https://github.com/manixh-s', '_blank');
            return "Opening GitHub...";
        },

        date: () => new Date().toString(),
        
        clear: () => {
            history.innerHTML = "";
            return "";
        },

        exit: () => {
            closeTerminal();
            return "Closing session...";
        },

        guessnumber: () => {
            startGuessNumberGame();
            return "Let's play Guess a Number! I'm thinking of a number between 1 and 100.\nType your guess...";
        },

        advice: async () => {
            try {
                const response = await fetch('https://api.adviceslip.com/advice');
                const data = await response.json();
                if (data.slip && data.slip.advice) {
                    return `üí° ${data.slip.advice}`;
                } else {
                    return "Could not fetch advice at this moment. Try again later.";
                }
            } catch (error) {
                return "Error fetching advice. Check your internet connection.";
            }
        }
    };

    // --- GUESS A NUMBER GAME LOGIC ---
    let gameActive = false;
    let targetNumber = 0;
    let attempts = 0;

    function startGuessNumberGame() {
        gameActive = true;
        targetNumber = Math.floor(Math.random() * 100) + 1;
        attempts = 0;
    }

    function handleGuess(guess) {
        const num = parseInt(guess);
        
        if (isNaN(num)) {
            return "Please enter a valid number!";
        }
        
        attempts++;
        
        if (num === targetNumber) {
            gameActive = false;
            return `üéâ Congratulations! You guessed it in ${attempts} attempt${attempts > 1 ? 's' : ''}!\nThe number was ${targetNumber}.\nType 'GuessNumber' to play again!`;
        } else if (num < targetNumber) {
            return `Too low! Try again. (Attempt ${attempts})`;
        } else {
            return `Too high! Try again. (Attempt ${attempts})`;
        }
    }

    // Input Handling
    cmdInput.addEventListener('keydown', async function(event) {
        if (event.key === 'Enter') {
            const fullCommand = cmdInput.value;
            const parts = fullCommand.trim().split(" ");
            const cmd = parts[0].toLowerCase();
            const args = parts.slice(1).join(" ");

            addToHistory("guest@manixh:~$ " + fullCommand);

            // Check if game is active
            if (gameActive) {
                const response = handleGuess(fullCommand.trim());
                if (response) addToHistory(response);
            } else if (cmd === "") {
            } else if (commands[cmd]) {
                const response = await commands[cmd](args);
                if (response) addToHistory(response);
            } else if (cmd === "echo") {
                 addToHistory(args);
            } else {
                addToHistory(`bash: command not found: ${cmd}`);
            }

            cmdInput.value = "";
            
            // Auto-scroll logic updated for the window container
            const contentDiv = document.getElementById('window-content');
            contentDiv.scrollTop = contentDiv.scrollHeight;
        }
    });

    function addToHistory(text) {
        const div = document.createElement('div');
        div.className = 'output';
        div.innerText = text;
        history.appendChild(div);
    }

    // --- SNAKE GAME LOGIC ---
    const snakeCanvas = document.getElementById('snakeCanvas');
    const snakeCtx = snakeCanvas.getContext('2d');
    const snakeScoreDisplay = document.getElementById('snakeScore');
    const snakeHighScoreDisplay = document.getElementById('snakeHighScore');
    const snakeTimeDisplay = document.getElementById('snakeTime');
    const snakeGameOverScreen = document.getElementById('snakeGameOver');
    const snakeRestartBtn = document.getElementById('snakeRestartBtn');

    const SNAKE_GRID_SIZE = 20;
    let SNAKE_TILE_COUNT = snakeCanvas.width / SNAKE_GRID_SIZE;

    let snake = [];
    let snakeDirection = { x: 1, y: 0 };
    let snakeNextDirection = { x: 1, y: 0 };
    let snakeFood = {};
    let snakeScore = 0;
    let snakeHighScore = parseInt(localStorage.getItem('snakeHighScore')) || 0;
    let snakeSpeed = 150;
    let snakeGameLoop;
    let snakeStartTime;
    let snakeElapsedTime = 0;
    let snakeTimeInterval;
    let snakeRunning = false;

    function initSnakeGame() {
        SNAKE_TILE_COUNT = snakeCanvas.width / SNAKE_GRID_SIZE;
        const centerX = Math.floor(SNAKE_TILE_COUNT / 2);
        const centerY = Math.floor(SNAKE_TILE_COUNT / 2);
        
        snake = [
            { x: centerX, y: centerY },
            { x: centerX - 1, y: centerY },
            { x: centerX - 2, y: centerY }
        ];
        snakeDirection = { x: 1, y: 0 };
        snakeNextDirection = { x: 1, y: 0 };
        snakeScore = 0;
        snakeSpeed = 150;
        snakeElapsedTime = 0;
        snakeRunning = true;

        snakeScoreDisplay.textContent = snakeScore;
        snakeHighScoreDisplay.textContent = snakeHighScore;
        snakeTimeDisplay.textContent = '0:00';
        snakeGameOverScreen.style.display = 'none';
        document.getElementById('snakeStartScreen').style.display = 'none';

        spawnSnakeFood();
        snakeStartTime = Date.now();
        startSnakeTimeTracking();
        startSnakeGameLoop();
    }

    function stopSnakeGame() {
        snakeRunning = false;
        if (snakeGameLoop) clearInterval(snakeGameLoop);
        if (snakeTimeInterval) clearInterval(snakeTimeInterval);
    }

    function startSnakeTimeTracking() {
        if (snakeTimeInterval) clearInterval(snakeTimeInterval);
        snakeTimeInterval = setInterval(() => {
            if (snakeRunning) {
                snakeElapsedTime = Math.floor((Date.now() - snakeStartTime) / 1000);
                const minutes = Math.floor(snakeElapsedTime / 60);
                const seconds = snakeElapsedTime % 60;
                snakeTimeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
        }, 1000);
    }

    function startSnakeGameLoop() {
        if (snakeGameLoop) clearInterval(snakeGameLoop);
        snakeGameLoop = setInterval(updateSnake, snakeSpeed);
    }

    function spawnSnakeFood() {
        do {
            snakeFood = {
                x: Math.floor(Math.random() * SNAKE_TILE_COUNT),
                y: Math.floor(Math.random() * SNAKE_TILE_COUNT)
            };
        } while (snake.some(segment => segment.x === snakeFood.x && segment.y === snakeFood.y));
    }

    function updateSnake() {
        if (!snakeRunning) return;

        snakeDirection = { ...snakeNextDirection };

        const newHead = {
            x: snake[0].x + snakeDirection.x,
            y: snake[0].y + snakeDirection.y
        };

        if (newHead.x < 0 || newHead.x >= SNAKE_TILE_COUNT ||
            newHead.y < 0 || newHead.y >= SNAKE_TILE_COUNT) {
            snakeGameOver();
            return;
        }

        if (snake.some(segment => segment.x === newHead.x && segment.y === newHead.y)) {
            snakeGameOver();
            return;
        }

        snake.unshift(newHead);

        if (newHead.x === snakeFood.x && newHead.y === snakeFood.y) {
            snakeScore++;
            snakeScoreDisplay.textContent = snakeScore;
            
            // Check and update high score
            if (snakeScore > snakeHighScore) {
                snakeHighScore = snakeScore;
                snakeHighScoreDisplay.textContent = snakeHighScore;
                localStorage.setItem('snakeHighScore', snakeHighScore);
            }
            
            spawnSnakeFood();

            if (snakeScore % 5 === 0 && snakeSpeed > 50) {
                snakeSpeed -= 10;
                startSnakeGameLoop();
            }
        } else {
            snake.pop();
        }

        drawSnake();
    }

    function drawSnake() {
        snakeCtx.clearRect(0, 0, snakeCanvas.width, snakeCanvas.height);

        // Draw glowy grid lines
        snakeCtx.strokeStyle = 'rgba(0, 255, 136, 0.15)';
        snakeCtx.lineWidth = 1;
        snakeCtx.shadowBlur = 3;
        snakeCtx.shadowColor = 'rgba(0, 255, 136, 0.3)';
        for (let i = 0; i <= SNAKE_TILE_COUNT; i++) {
            snakeCtx.beginPath();
            snakeCtx.moveTo(i * SNAKE_GRID_SIZE, 0);
            snakeCtx.lineTo(i * SNAKE_GRID_SIZE, snakeCanvas.height);
            snakeCtx.stroke();
            snakeCtx.beginPath();
            snakeCtx.moveTo(0, i * SNAKE_GRID_SIZE);
            snakeCtx.lineTo(snakeCanvas.width, i * SNAKE_GRID_SIZE);
            snakeCtx.stroke();
        }
        snakeCtx.shadowBlur = 0;

        snakeCtx.shadowBlur = 20;
        snakeCtx.shadowColor = '#ff4444';
        snakeCtx.fillStyle = '#ff4444';
        snakeCtx.beginPath();
        snakeCtx.arc(
            snakeFood.x * SNAKE_GRID_SIZE + SNAKE_GRID_SIZE / 2,
            snakeFood.y * SNAKE_GRID_SIZE + SNAKE_GRID_SIZE / 2,
            SNAKE_GRID_SIZE / 2 - 2,
            0,
            Math.PI * 2
        );
        snakeCtx.fill();
        snakeCtx.shadowBlur = 0;

        snake.forEach((segment, index) => {
            const gradient = snakeCtx.createLinearGradient(
                segment.x * SNAKE_GRID_SIZE,
                segment.y * SNAKE_GRID_SIZE,
                (segment.x + 1) * SNAKE_GRID_SIZE,
                (segment.y + 1) * SNAKE_GRID_SIZE
            );

            if (index === 0) {
                gradient.addColorStop(0, '#00ff88');
                gradient.addColorStop(1, '#00cc6f');
                snakeCtx.shadowBlur = 15;
                snakeCtx.shadowColor = '#00ff88';
            } else {
                const alpha = 1 - (index / snake.length) * 0.5;
                gradient.addColorStop(0, `rgba(0, 255, 136, ${alpha})`);
                gradient.addColorStop(1, `rgba(0, 204, 111, ${alpha})`);
                snakeCtx.shadowBlur = 5;
                snakeCtx.shadowColor = '#00ff88';
            }

            snakeCtx.fillStyle = gradient;
            snakeCtx.fillRect(
                segment.x * SNAKE_GRID_SIZE + 1,
                segment.y * SNAKE_GRID_SIZE + 1,
                SNAKE_GRID_SIZE - 2,
                SNAKE_GRID_SIZE - 2
            );
        });
        snakeCtx.shadowBlur = 0;
    }

    function snakeGameOver() {
        snakeRunning = false;
        clearInterval(snakeGameLoop);
        clearInterval(snakeTimeInterval);

        document.getElementById('snakeFinalScore').textContent = snakeScore;
        document.getElementById('snakeFinalHighScore').textContent = snakeHighScore;
        const minutes = Math.floor(snakeElapsedTime / 60);
        const seconds = snakeElapsedTime % 60;
        document.getElementById('snakeFinalTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

        snakeGameOverScreen.style.display = 'flex';
    }

    document.addEventListener('keydown', (e) => {
        if (!snakeRunning || snakeWindow.style.display === 'none') return;

        switch(e.key.toLowerCase()) {
            case 'w':
            case 'arrowup':
                if (snakeDirection.y === 0) snakeNextDirection = { x: 0, y: -1 };
                e.preventDefault();
                break;
            case 's':
            case 'arrowdown':
                if (snakeDirection.y === 0) snakeNextDirection = { x: 0, y: 1 };
                e.preventDefault();
                break;
            case 'a':
            case 'arrowleft':
                if (snakeDirection.x === 0) snakeNextDirection = { x: -1, y: 0 };
                e.preventDefault();
                break;
            case 'd':
            case 'arrowright':
                if (snakeDirection.x === 0) snakeNextDirection = { x: 1, y: 0 };
                e.preventDefault();
                break;
        }
    });

    snakeRestartBtn.addEventListener('click', () => {
        initSnakeGame();
    });

    document.getElementById('snakePlayBtn').addEventListener('click', () => {
        initSnakeGame();
    });

    // Handle window resize
    window.addEventListener('resize', () => {
        if (snakeWindow.style.display === 'flex') {
            resizeSnakeCanvas();
            if (snakeRunning) {
                drawSnake();
            }
        }
    });
</script>

</body>
</html>